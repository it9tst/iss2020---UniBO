<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>LABORATORIO DI SISTEMI SOFTWARE 2020 - Sprint 4</title>
        <!-- Bootstrap -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" crossorigin="anonymous">
        <style type="text/css">
            em {
                font-size: 80%;
                font-weight: bold;
                border-style:solid;
                border-color: #e9ecef;
                color: #28a745;
            }
            a {
                color: #28a745;
            }
            .qak {
                height:500px;
                overflow-y: visible;
            }
        </style>
    </head>
    <body>
		<div class="jumbotron jumbotron-fluid text-center" style="padding: 5px">
			<h1 class="display-4">LABORATORIO DI SISTEMI SOFTWARE 2020</h1>
			<p class="lead">Sprint 4</p>
		</div>
		<div class="container">
			<div class="row text-center">
				<div class="col-lg-6 offset-lg-3">
				   <h2><u>Requisiti</u></h2>
                    <hr class="my-4">
                </div>
			</div>
            <div>
            
            <h4>Tea-room COVID-19</h4> 

            The <em>manager</em> of a <em>tearoom</em> intends to regulate the access to the service by means of a ddr robot (<em>waiter</em>).
            <br/><br/>
            The <em>tearoom</em> is a rectangular room that includes:

            <ul>
            <li>an <em>entrancedoor</em> to enter in the room and an <em>exitdoor</em> to exit form it;</li>
            <li>a number <tt>N (N=2)</tt> of <em>teatable</em>;</li>
            <li>a <em>serviceare</em> including a <em>servicedesk</em> at which works a <em>barman</em>;</li>
            <li>a <em>hall</em> equipped with a <em>presencedetector</em>, i.e. a device (e.g. a sonar) that can detect the presence of 
            a person (or some other entity) in it.</li>
            </ul>

            The <em>waiter</em> can freely move along the borders of the tearoom, since there are no obstacles there. 

            <center><img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint4_an_req/doc/assets/tearoom20.png" alt="tearoom20.png" width="65%"/></center>


            <h5>User stories</h5>
            As a <em>client</em>:
            <ul>
            <li>I intend to <em>notify</em> my interest in <em>entering</em> in a <em>safe tearoom</em>, <em>sitting</em> at a free teatable,  <em>ordering</em> 
            some tea,  <em>consuming</em> it  (within a limited amount of time <em>maxstaytime</em>)  <em>paying</em> the service
            with my credit card and finally <em>leaving</em> the room.</li>
            <li>For <em>safe tearoom</em>, I intend a tearoom with clean tea-tables posed at a proper distance; the room is populated by human clients 
            whose body temperature is less than <tt>37.5</tt> degrees. </li>
            <li>I can submit my notification of interest by hitting the <em>smartbell</em> located near the  <em>entrancedoor</em> 
            that will automatically measure my body temperature and send a request message to the <em>waiter</em>, by giving to me an unique <em>clientidentifier</em>.
            </li>
            <li>If my body temperature is ok, but my request cannot be immediately satisfied (since the room is full), I will be <em>informed</em> by the <em>waiter</em> 
            about the maximum waiting time.</li>
            </ul>

            As a <em>manager</em>:
            <ul>
            <li>I intend to be able to see the <em>current state</em> of the <em>tearoom</em> by using  a browser connected to a web-server 
            associated to the application.
            </li>
            </ul>


            <h5>Requirements</h5>

            The <em>waiter</em> should perform the following tasks:
            <ul>

            <li><em>accept</em> the request of a client to enter in the tearoom if there is at least one teatable in the state <em>tableclean</em>, i.e.
            the table is free and has been properly cleaned; </li>
            <li><em>inform</em> the client about the maximum waiting time if there is no <em>tableclean</em>;</li> 
            <li><em>reach</em> the <em>entrance door</em> and <em>convoy</em> the accepted client to the selected teatable;</li>
            <li><em>take</em> the order of the client and transmit it (using a wifi-device) to the <em>barman</em>; </li>
            <li><em>serve</em>  the client when the <em>barman</em> says that the requested drink is ready;</li>
            <li><em>collect</em> the payment from the client when he/she has finished to consume or when the <em>maxstaytime</em> is expired;</li>
            <li><em>convoy</em> the client to the <em>exitdoor</em>;</li>
            <li><em>clean</em> the tea-table just freed  by the client;</li>
            <li><em>rest</em> at my <em>home</em> when there is nothing to do.</li>
            </ul>

            Since the room could contain <tt>N</tt> clients at the time, the <em>waiter</em> should reduce as much as possible the waiting time of the requests coming from each client.<br><br>
            
            </div>
			<br>
			<hr>
			<br>
			<div class="row text-center">
				<div class="col-lg-6 offset-lg-3"><u><h2>Analisi dei requisiti</h2></u></div>
                <hr class="my-4">
			</div>
			<div>
				<p>Per il seguente sprint, assumiamo che partendo dall'analisi dei problemi dello sprint precedente, procediamo con uno scenario in cui si richiedano delle interruzioni e cominciamo a modellarlo.</p>
				<table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Caso d'uso</th>
                            <th scope="col">Descrizione</th>
                        </tr>
                    </thead>
                    <tbody>
						<tr>
                            <th scope="row">Cliente</th>
                            <td>Virtuale</td>
                        </tr>
                        <tr>
                            <th scope="row">Clienti idonei</th>
                            <td>N</td>
                        </tr>
						<tr>
                            <th scope="row">Clienti non idonei</th>
                            <td>NAN</td>
                        </tr>
                        <tr>
                            <th scope="row">Tavoli liberi</th>
                            <td>1</td>
                        </tr>
						<tr>
                            <th scope="row">Tavoli sanificati</th>
                            <td>1</td>
                        </tr>
						<tr>
                            <th scope="row"><a href="#step1">Step 1</a></th>
                            <td>Un cliente già presente all'interno della tearoom, al tavolo 1, chiede di ordinare. Il waiter si dirige al tavolo 1, attende l'ordinazione del cliente e prende in carico quest'ultima. La comunica al barman che la prepara. A questo punto il waiter controlla che non ci siano altre richieste in coda e si dirige verso la home. Durante il percorso arriva la richiesta da parte dello smartbell di arrivo di un altro cliente idoneo. Quindi il waiter interrompe il suo percorso verso la home, per dirigersi verso l'entrata della tearoom per accompagnare il nuovo cliente al tavolo 2.</td>
                        </tr>
						<tr>
                            <th scope="row"><a href="#step2">Step 2</a></th>
                            <td>Il manager controlla lo stato attuale della tearoom utilizzando un browser connesso ad un web-server associato all'applicazione.</td>
                        </tr>
                    </tbody>
                </table>
				<br>
				<h4 id="step1">Step 1</h4>
				<p>A seguito di un confronto con il committente, è stata valutata la possibilità di aggiungere ulteriori task interrompibili a runtime, per permettere la gestione di richieste oltre ai casi già affrontati durante <a href="https://htmlview.glitch.me/?https://github.com/it9tst/iss2020ProjectBO/blob/feature/sprint2_an_req/doc/sprint2.html">l'analisi dei requisiti dello sprint 2</a>.</p>
				<p>Quindi ridefiniamo i task che saranno interrompibili a runtime.</p>
				<table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Task prioritari</th>
							<th scope="col">Entità che interrompono</th>
							<th scope="col">Task che interrompono</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">Clean table</th>
							<td>
								<ul>
									<li>Client</li>
									<li>Smartbell</li>
									<li>Barman</li>
									<li>MaxStayTime</li>
								</ul>
							</td>
							<td>
								<ul>
									<li>Accept the request of a client</li>
									<li>Take the order of the client</li>
									<li>Serve the client</li>
									<li>Collect the payment from the client</li>
									<li>Kick the client when maxstaytime expired</li>
								</ul>
							</td>
                        </tr>
                        <tr>
                            <th scope="row">Reach home</th>
							<td>
								<ul>
									<li>Client</li>
									<li>Smartbell</li>
									<li>Barman</li>
									<li>MaxStayTime</li>
								</ul>
							</td>
							<td>
								<ul>
									<li>Accept the request of a client</li>
									<li>Take the order of the client</li>
									<li>Serve the client</li>
									<li>Collect the payment from the client</li>
									<li>Kick the client when maxstaytime expired</li>
								</ul>
							</td>
                        </tr>
                    </tbody>
                </table>
				<p>Quindi il modello del waitermind è stato raffinato ulteriormente: nei precedenti sprint, il waitermind controllava se c'erano altre azioni da eseguire solo dopo essere tornato in home o dopo aver completato uno dei tre stati di pulizia. Ora invece può essere interrotto mentre esegue un task non prioritario o mentre si sta muovendo per compiere un task non prioritario.</p>
				<p>Dai requisiti emersi dall'analisi, i messaggi scambiati, tra le entità prese attualmente in esame, sono i seguenti:</p>
				<table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Messaggio</th>
							<th scope="col">Tipologia</th>
                            <th scope="col">Descrizione</th>
                            <th scope="col">Entità</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">enter_request_client</th>
							<td>Request</td>
                            <td>Il client chiede di entrare nella tearoom</td>
                            <td>smartbell - client</td>
                        </tr>
						<tr>
                            <th scope="row">enter_reply_from_smartbell_n</th>
							<td>Reply</td>
                            <td>E' la risposta negativa di enter_request_client</td>
                            <td>smartbell - client</td>
                        </tr>
						<tr>
                            <th scope="row">go_to_wait_ring</th>
							<td>Dispatch</td>
                            <td>Lo smartbell torna in attesa che un cliente suoni al campanello</td>
                            <td>smartbell</td>
                        </tr>
                    </tbody>
                </table>
				<p>Il modello del waitermind derivato dallo step 1 è il seguente:</p>
				<script src="https://emgithub.com/embed.js?target=https%3A%2F%2Fgithub.com%2Fit9tst%2Fiss2020ProjectBO%2Fblob%2Ffeature%2Fsprint4_an_req%2Fdoc%2Fassets%2Fstep1_waitermind.qak&style=github&showBorder=on&showLineNumbers=on&showFileMeta=on&showCopy=on"></script>
                <p>Il modello del waiterengine derivato dallo step 1 è il seguente:</p>
                <script src="https://emgithub.com/embed.js?target=https%3A%2F%2Fgithub.com%2Fit9tst%2Fiss2020ProjectBO%2Fblob%2Ffeature%2Fsprint4_an_req%2Fdoc%2Fassets%2Fstep1_waiterengine.qak&style=github&showBorder=on&showLineNumbers=on&showFileMeta=on&showCopy=on"></script>
				<br>
				<br>
				<h4 id="step2">Step 2</h4>
				<p>Il committente ha chiarito che per Stato Attuale della Tearoom intende lo stato della tearoom ricavato dall'attore tearoomglobalstate, il quale interagisce tra le varie entità del sistema e la base di conoscenza.</p>
				<p>Attraverso la WebApp, verranno mostrate i seguenti dati e funzioni:</p>
				<ul>
					<li>Stato del waiter</li>
					<li>Stato del barman</li>
					<li>Stato dei tavoli</li>
					<li>Stato di pulizia dei tavoli</li>
					<li>Permettere lo spostamento manuale del waiter tramite comandi</li>
				</ul>
			</div>
			<br>
			<hr>
			<br>
			<div class="row text-center">
				<div class="col-lg-6 offset-lg-3"><u><h2>Test plan</h2></u></div>
				<hr class="my-4">
			</div>
            <div>
				<p>Le interazioni modellate durante l'analisi dei requisiti si suppongono già testate in quanto semplici interazioni (dispatch, request-response definite <a href="http://htmlpreview.github.io/?https://github.com/anatali/iss2020LabBo/blob/master/it.unibo.qakactor/userDocs/LabQakIntro2020.html">qui</a>) implementate nel framework di riferimento QAK presentato nello <a href="https://htmlview.glitch.me/?https://github.com/it9tst/iss2020ProjectBO/blob/feature/sprint0/doc/sprint0.html">sprint iniziale</a>.</p>
            </div>
			<br>
			<br>
		</div>
        <div class="container-fluid" style="background-color: #e9ecef; padding: 15px 0px">
            <div class="container">
                <div class="card-group" style="margin: 0 auto; width: 600px;">
                    <div class="card">
                        <img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint4_an_req/doc/assets/vc.jpg" class="card-img-top">
                        <div class="card-body">
                            <h5 class="card-title">Vittorio Corsale</h5>
                            <p class="card-text">vittorio.corsale@studio.unibo.it</p>
                        </div>
                    </div>
                    <div class="card">
                        <img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint4_an_req/doc/assets/gt.jpg" class="card-img-top">
                        <div class="card-body">
                            <h5 class="card-title">Gabriele Tornatore</h5>
                            <p class="card-text">gabriele.tornatore@studio.unibo.it</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-body">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <img src="" class="imagepreview" style="width: 100%;" >
                    </div>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.6/dist/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
        <script>
            $(function() {
                $('.pop').on('click', function() {
                    $('.imagepreview').attr('src', $(this).find('img').attr('src'));
                    $('#imagemodal').modal('show');   
                });   
            });
        </script>
    </body>
</html>