<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>LABORATORIO DI SISTEMI SOFTWARE 2020 - Sprint 3</title>
        <!-- Bootstrap -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" crossorigin="anonymous">
        <style type="text/css">
            em{
                font-size: 80%;
                font-weight: bold;
                border-style:solid;
                border-color: #e9ecef;
                color: #28a745;
            }
        </style>
    </head>
    <body>
		<div class="jumbotron jumbotron-fluid text-center" style="padding: 5px">
			<h1 class="display-4">LABORATORIO DI SISTEMI SOFTWARE 2020</h1>
			<p class="lead">Sprint 3</p>
		</div>
		<div class="container">
			<div class="row text-center">
				<div class="col-lg-6 offset-lg-3">
				   <h2><u>Requisiti</u></h2>
                    <hr class="my-4">
                </div>
			</div>
            <div>
            
            <h4>Tea-room COVID-19</h4> 

            The <em>manager</em> of a <em>tearoom</em> intends to regulate the access to the service by means of a ddr robot (<em>waiter</em>).
            <br/><br/>
            The <em>tearoom</em> is a rectangular room that includes:

            <ul>
            <li>an <em>entrancedoor</em> to enter in the room and an <em>exitdoor</em> to exit form it;</li>
            <li>a number <tt>N (N=2)</tt> of <em>teatable</em>;</li>
            <li>a <em>serviceare</em> including a <em>servicedesk</em> at which works a <em>barman</em>;</li>
            <li>a <em>hall</em> equipped with a <em>presencedetector</em>, i.e. a device (e.g. a sonar) that can detect the presence of 
            a person (or some other entity) in it.</li>
            </ul>

            The <em>waiter</em> can freely move along the borders of the tearoom, since there are no obstacles there. 

            <center><img src="assets/tearoom20.png" alt="tearoom20.png" width="65%"/></center>


            <h5>User stories</h5>
            As a <em>client</em>:
            <ul>
            <li>I intend to <em>notify</em> my interest in <em>entering</em> in a <em>safe tearoom</em>, <em>sitting</em> at a free teatable,  <em>ordering</em> 
            some tea,  <em>consuming</em> it  (within a limited amount of time <em>maxstaytime</em>)  <em>paying</em> the service
            with my credit card and finally <em>leaving</em> the room.</li>
            <li>For <em>safe tearoom</em>, I intend a tearoom with clean tea-tables posed at a proper distance; the room is populated by human clients 
            whose body temperature is less than <tt>37.5</tt> degrees. </li>
            <li>I can submit my notification of interest by hitting the <em>smartbell</em> located near the  <em>entrancedoor</em> 
            that will automatically measure my body temperature and send a request message to the <em>waiter</em>, by giving to me an unique <em>clientidentifier</em>.
            </li>
            <li>If my body temperature is ok, but my request cannot be immediately satisfied (since the room is full), I will be <em>informed</em> by the <em>waiter</em> 
            about the maximum waiting time.</li>
            </ul>

            As a <em>manager</em>:
            <ul>
            <li>I intend to be able to see the <em>current state</em> of the <em>tearoom</em> by using  a browser connected to a web-server 
            associated to the application.
            </li>
            </ul>


            <h5>Requirements</h5>

            The <em>waiter</em> should perform the following tasks:
            <ul>

            <li><em>accept</em> the request of a client to enter in the tearoom if there is at least one teatable in the state <em>tableclean</em>, i.e.
            the table is free and has been properly cleaned; </li>
            <li><em>inform</em> the client about the maximum waiting time if there is no <em>tableclean</em>;</li> 
            <li><em>reach</em> the <em>entrance door</em> and <em>convoy</em> the accepted client to the selected teatable;</li>
            <li><em>take</em> the order of the client and transmit it (using a wifi-device) to the <em>barman</em>; </li>
            <li><em>serve</em>  the client when the <em>barman</em> says that the requested drink is ready;</li>
            <li><em>collect</em> the payment from the client when he/she has finished to consume or when the <em>maxstaytime</em> is expired;</li>
            <li><em>convoy</em> the client to the <em>exitdoor</em>;</li>
            <li><em>clean</em> the tea-table just freed  by the client;</li>
            <li><em>rest</em> at my <em>home</em> when there is nothing to do.</li>
            </ul>

            Since the room could contain <tt>N</tt> clients at the time, the <em>waiter</em> should reduce as much as possible the waiting time of the requests coming from each client.<br><br>
            
            </div>
			<br>
			<hr>
			<br>
			<div class="row text-center">
				<div class="col-lg-6 offset-lg-3"><u><h2>Analisi dei requisiti</h2></u></div>
                <hr class="my-4">
			</div>
			<div>
                <a href="https://htmlview.glitch.me/?https://github.com/it9tst/iss2020ProjectBO/blob/feature/sprint3_an_req/doc/sprint3.html">Link al documento dell'analisi dei requisiti</a>
            </div>
			<hr>
			<br>
			<div class="row text-center">
				<div class="col-lg-6 offset-lg-3"><u><h2>Analisi dei problemi</h2></u></div>
                <hr class="my-4">
			</div>
            <div>
			  <p>Una delle problematiche con cui ci scontriamo a questo punto del progetto è la responsabilità delle varie entità, ovvero il carico e la gestione delle informazioni che esse collezionano al loro interno. L'esempio principale è il waitermind che al suo interno ha un quantitativo ingente di stati da gestire che fa emergere problematiche di progettazione.</p>
				<p>A tale scopo introduciamo una nuova entità:</p>
			  <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Entità</th>
							<th scope="col">Modello</th>
                            <th scope="col">Descrizione</th>
                        </tr>
                    </thead>
                    <tbody>
						<tr>
                            <th scope="row">tearoomstatemanager</th>
							<td>Attore</td>
                            <td>Il suo scopo è quello di collezionare tutto lo stato della tearoom, il quale interagisce tra le varie entità del sistema e la base di conoscenza.</td>
                        </tr>
                    </tbody>
                </table>
				<p>Il tearoomstatemanager memorizza la base di conoscenza dell'intera tearoom, in particolare le posizioni delle varie entità e l'evoluzione dei cambiamenti futuri di stato. Il tutto in un file Prolog data la predisposizione del metamodello dei QAK che permette una facile interazione con file di questo tipo.</p>
				<p>A questo punto il waiter delega il tearoomstatemanager nel prendere le decisioni riguaro le azioni che dovrà eseguire interrogandolo riguardo lo stato della tearoom.</p>
				<p>Ad esempio, all'ingresso di un nuovo cliente, il waiter chiede direttamente al tearoomstatemanager a quale tavolo farlo accomodare, invece di chiedergli lo stato della tearoom, verificare la condizione dei tavoli e infine scegliere quello libero.</p>
				<p>Aggiungiamo i messaggi che servono per consentire la gestione del nuovo attore e modifichiamo alcuni dei precedenti:</p>
				<table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Messaggio</th>
							<th scope="col">Tipologia</th>
                            <th scope="col">Descrizione</th>
                            <th scope="col">Entità</th>
                            <th scope="col">Parametri</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">clientReadyToOrder</th>
							<td>Dispatch</td>
                            <td>Usato per far partire un timer di maxstaytime.</td>
                            <td>client - waitermind</td>
                            <td>ID</td>
                        </tr>
						<tr>
                            <th scope="row">clientOrder</th>
							<td>Dispatch</td>
                            <td>Usato per far partire un timer di maxstaytime.</td>
                            <td>client - waitermind</td>
                            <td>ID, ORDER</td>
                        </tr>
						<tr>
                            <th scope="row">setWaiterState</th>
							<td>Dispatch</td>
                            <td>Usato per comunicare lo stato corrente del waitermind.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>STATE</td>
                        </tr>
						<tr>
                            <th scope="row">setBarmanState</th>
							<td>Dispatch</td>
                            <td>Usato per comunicare lo stato corrente del barman.</td>
                            <td>barman - tearoomstatemanager</td>
                            <td>STATE</td>
                        </tr>
						<tr>
                            <th scope="row">setTableState</th>
							<td>Dispatch</td>
                            <td>Usato per comunicare lo stato corrente dei tavoli.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>TABLE, TABLE</td>
                        </tr>
						<tr>
                            <th scope="row">occupyTable</th>
							<td>Dispatch</td>
                            <td>Usato per comunicare che un tavolo è stato occupato da un cliente.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>TABLE, ID</td>
                        </tr>
						<tr>
                            <th scope="row">addOrderReady</th>
							<td>Dispatch</td>
                            <td>Usato per comunicare che l'ordine di un cliente è pronto per essere portato al tavolo.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>ID</td>
                        </tr>
						<tr>
                            <th scope="row">removeOrderReady</th>
							<td>Dispatch</td>
                            <td>Usato per comunicare che l'ordine di un cliente è stato prelevato dal barman.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>ID</td>
                        </tr>
						<tr>
                            <th scope="row">getTableFreeCleanRequest</th>
							<td>Request</td>
                            <td>Usato per chiedere un tavolo pulito che possa essere occupato da un cliente.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>PAYLOAD</td>
                        </tr>
						<tr>
                            <th scope="row">getTableFreeCleanReply</th>
							<td>Reply</td>
                            <td>E' la risposta di getTableFreeCleanRequest.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>TABLE</td>
                        </tr>
						<tr>
                            <th scope="row">getTableToCleanRequest</th>
							<td>Request</td>
                            <td>Usato per chiedere quale tavolo ha bisogno di essere pulito.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>PAYLOAD</td>
                        </tr>
						<tr>
                            <th scope="row">getTableToCleanReply</th>
							<td>Reply</td>
                            <td>E' la risposta di getTableToCleanRequest.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>TABLE, STATE</td>
                        </tr>
						<tr>
                            <th scope="row">getTimerForInformRequest</th>
							<td>Request</td>
                            <td>Usato per richiedere il massimo tempo di attesa.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>PAYLOAD</td>
                        </tr>
						<tr>
                            <th scope="row">getTimerForInformReply</th>
							<td>Reply</td>
                            <td>E' la risposta di getTimerForInformRequest.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>TIMERLEFT</td>
                        </tr>
						<tr>
                            <th scope="row">getTableFromIdRequest</th>
							<td>Request</td>
                            <td>Usato per richiedere il tavolo dove è seduto un cliente specifico.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>ID</td>
                        </tr>
						<tr>
                            <th scope="row">getTableFromIdReply</th>
							<td>Reply</td>
                            <td>E' la risposta di getTableFromIdRequest.</td>
                            <td>waitermind - tearoomstatemanager</td>
                            <td>TABLE</td>
                        </tr>
                    </tbody>
                </table>
				<p>Ecco come si presenta il sistema, da un punto di vista logico, nel suo complesso.</p>
                <a href="javascript:void(0)" class="pop">
                    <center><img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint3_an_probl/doc/assets/logico.png" alt="logico.png" style="width: 40%;"/></center>
                </a>
				<br>
				<br>
				<p>Ecco il grafo degli stati che compongono il waitermind.</p>
                <a href="javascript:void(0)" class="pop">
                    <center><img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint3_an_probl/doc/assets/statiWaiterMind2.png" alt="statiWaitermind.png" style="width: 60%;"/></center>
                </a>
				<br>
				<br>
				<p>Ecco il grafo degli stati che compongono il waiterengine.</p>
                <a href="javascript:void(0)" class="pop">
                    <center><img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint3_an_probl/doc/assets/statiWaiterengine.png" alt="statiWaiterengine.png" style="width: 50%;"/></center>
                </a>
				<br>
				<br>
				<p>Ecco il grafo degli stati che compongono lo smartbell.</p>
                <a href="javascript:void(0)" class="pop">
                    <center><img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint3_an_probl/doc/assets/statiSmartbell.png" alt="statiSmartbell.png" style="width: 40%;"/></center>
                </a>
				<br>
				<br>
				<p>Ecco il grafo degli stati che compongono il barman.</p>
                <a href="javascript:void(0)" class="pop">
                    <center><img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint3_an_probl/doc/assets/statiBarman.png" alt="statiBarman.png" style="width: 40%;"/></center>
                </a>
				<br>
				<br>
				<p>Ecco il grafo degli stati che compongono il maxstaytime.</p>
                <a href="javascript:void(0)" class="pop">
                    <center><img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint3_an_probl/doc/assets/statiMaxstaytime2.png" alt="statiMaxstaytime.png" style="width: 40%;"/></center>
                </a>
				<br>
				<br>
				<p>Ecco il grafo degli stati che compongono i maxstaytimetable1 e maxstaytimetable2.</p>
                <a href="javascript:void(0)" class="pop">
                    <center><img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint3_an_probl/doc/assets/statiMaxstaytimetable2.png" alt="statiMaxstaytimetable.png" style="width: 60%;"/></center>
                </a>
				<br>
				<br>
				<p>Ecco il grafo degli stati che compongono il tearoomstatemanager.</p>
                <a href="javascript:void(0)" class="pop">
                    <center><img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint3_an_probl/doc/assets/statiTearoomstatemanager.png" alt="statiTearoomstatemanager.png" style="width: 50%;"/></center>
                </a>
            </div>
			<br>
			<hr>
			<br>
			<div class="row text-center">
				<div class="col-lg-6 offset-lg-3"><u><h2>Test plan</h2></u></div>
				<hr class="my-4">
			</div>
            <div>
				<p>Non sono sorte in fase di analisi funzionalità da testare, in quanto ci siamo occupati unicamente di modificare il precedente modello introducendo la base di conoscenza in Prolog.</p>
				<p>Le funzionalità aggiunte possono essere testate con i test precedentemente realizzati.</p>
			</div>
			<br>
			<br>
		</div>
        <div class="container-fluid" style="background-color: #e9ecef; padding: 15px 0px">
            <div class="container">
                <div class="card-group" style="margin: 0 auto; width: 600px;">
                    <div class="card">
                        <img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint3_an_probl/doc/assets/vc.jpg" class="card-img-top">
                        <div class="card-body">
                            <h5 class="card-title">Vittorio Corsale</h5>
                            <p class="card-text">vittorio.corsale@studio.unibo.it</p>
                        </div>
                    </div>
                    <div class="card">
                        <img src="https://raw.githubusercontent.com/it9tst/iss2020ProjectBO/feature/sprint3_an_probl/doc/assets/gt.jpg" class="card-img-top">
                        <div class="card-body">
                            <h5 class="card-title">Gabriele Tornatore</h5>
                            <p class="card-text">gabriele.tornatore@studio.unibo.it</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-body">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <img src="" class="imagepreview" style="width: 100%;" >
                    </div>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.6/dist/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
        <script>
            $(function() {
                $('.pop').on('click', function() {
                    $('.imagepreview').attr('src', $(this).find('img').attr('src'));
                    $('#imagemodal').modal('show');   
                });   
            });
        </script>
    </body>
</html>